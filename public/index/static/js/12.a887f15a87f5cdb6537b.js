webpackJsonp([12],{TPQz:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Dd8w"),r=e.n(a),i=e("HulU"),o=e("DA34"),n=e("jCps"),c=e("NYxO"),l=e("/kga"),u=e("etVR"),d=(n.b,r()({getImg:function(t){return null!=t.pro_sku?t.pro_sku.img:t.pro.img},getStock:function(t){return null!=t.pro_sku?t.pro_sku.stock:t.pro.stock},getPrice:function(t){return null!=t.pro_sku?t.pro_sku.price:t.pro.price},getSku:function(t){return null!=t.pro_sku?t.pro_sku.name:""},chooseAddress:function(){this.$router.push("/address")},handelPay:function(){var t=this;this.payFlag=!1,0!=this.checklist.length&&(2!=this.checklist[0]&&3!=this.checklist[0]?Object(i.a)({url:"/shop/order/orderPay",method:"post",data:{__token__:this.__token__,pay_way:this.checklist[0]}}).then(function(s){t.initCart(),t.setIndex(1),t.$router.replace("/order")}).catch(function(s){0==s.status&&(t.initCart(),t.setIndex(0),t.$router.replace("/order")),console.log(s)}):this.$vux.toast.text("线上支付正在开发中"))}},Object(c.b)(["initCart"]),Object(c.d)({setIndex:"SET_ORDER_CURRENT_INDEX"})),o.a,l.a,u.a,{name:"cart-order",mixins:[n.b],data:function(){return{address:{},pro:[],__token__:""}},created:function(){var t=this;Object(i.a)({url:"/shop/order/getChooseGoods",method:"get"}).then(function(s){var e=[s.data.address,s.data.goods,s.data.__token__];t.address=e[0],t.pro=e[1],t.__token__=e[2]}).catch(function(s){-1!=s.status?t.$router.back():setTimeout(function(){t.$router.push("/addAddress")},1e3)})},methods:r()({getImg:function(t){return null!=t.pro_sku?t.pro_sku.img:t.pro.img},getStock:function(t){return null!=t.pro_sku?t.pro_sku.stock:t.pro.stock},getPrice:function(t){return null!=t.pro_sku?t.pro_sku.price:t.pro.price},getSku:function(t){return null!=t.pro_sku?t.pro_sku.name:""},chooseAddress:function(){this.$router.push("/address")},handelPay:function(){var t=this;this.payFlag=!1,0!=this.checklist.length&&(2!=this.checklist[0]&&3!=this.checklist[0]?Object(i.a)({url:"/shop/order/orderPay",method:"post",data:{__token__:this.__token__,pay_way:this.checklist[0]}}).then(function(s){t.initCart(),t.setIndex(1),t.$router.replace("/order")}).catch(function(s){0==s.status&&(t.initCart(),t.setIndex(0),t.$router.replace("/order")),console.log(s)}):this.$vux.toast.text("线上支付正在开发中"))}},Object(c.b)(["initCart"]),Object(c.d)({setIndex:"SET_ORDER_CURRENT_INDEX"})),computed:{totalPay:function(){var t=this,s=0;return this.pro.map(function(e){s+=t.getPrice(e)*e.num}),s.toFixed(2)}},components:{plant:o.a,XDialog:l.a,Checklist:u.a}}),_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"cart-order"}},[e("div",{attrs:{id:"cart-order"}},[e("div",{staticClass:"main"},[e("div",{staticClass:"address"},[e("div",{staticClass:"left"},[e("div",{staticClass:"name"},[e("span",[t._v("收货人: "+t._s(t.address.name))]),t._v(" "),e("span",[t._v(t._s(t.address.tel))])]),t._v(" "),e("div",{staticClass:"address-detail"},[t._v(t._s(t.address.province)+","+t._s(t.address.city)+","+t._s(t.address.area)+","+t._s(t.address.address))])]),t._v(" "),e("div",{staticClass:"right",on:{click:function(s){t.chooseAddress()}}},[e("svg-icon",{attrs:{"icon-class":"right2",color:"#fff",size:"30"}})],1)]),t._v(" "),e("div",{staticClass:"bar"}),t._v(" "),e("div",{staticClass:"product-list"},t._l(t.pro,function(s,a){return e("plant",{key:a,attrs:{"back-color":"#fff",img:t.getImg(s)}},[e("div",{staticClass:"text-content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"name"},[t._v(t._s(s.pro.title))]),t._v(" "),t.getSku(s)?e("div",{staticClass:"sku"},[t._v("属性: "+t._s(t.getSku(s)))]):e("div",{staticClass:"sku"},[t._v(" ")]),t._v(" "),e("div",{staticClass:"num"},[t._v(t._s(t.getPrice(s))+" x "+t._s(s.num))]),t._v(" "),e("div",{staticClass:"item-total"},[t._v("小计: "+t._s((t.getPrice(s)*s.num).toFixed(2)))])])])}))]),t._v(" "),e("div",{staticClass:"total"},[e("div",{staticClass:"price"},[t._v("共计: ¥"+t._s(t.totalPay))]),t._v(" "),e("div",{staticClass:"submit",on:{click:function(s){t.payFlag=!0}}},[t._v("付款")])]),t._v(" "),e("x-dialog",{attrs:{"hide-on-blur":""},model:{value:t.payFlag,callback:function(s){t.payFlag=s},expression:"payFlag"}},[e("div",{staticClass:"pay"},[e("checklist",{attrs:{"label-position":"right",required:"",options:t.options,max:1},model:{value:t.checklist,callback:function(s){t.checklist=s},expression:"checklist"}}),t._v(" "),e("div",{staticClass:"btn",on:{click:function(s){t.handelPay()}}},[t._v("确定")])],1)])],1)])},staticRenderFns:[]};var p=e("VU/8")(d,_,!1,function(t){e("v3WX")},null,null);s.default=p.exports},v3WX:function(t,s){}});