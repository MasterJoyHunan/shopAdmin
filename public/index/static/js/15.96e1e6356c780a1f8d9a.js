webpackJsonp([15],{"6J1G":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("HulU"),i=a("jCps"),n=a("/kga"),r=a("etVR"),o=(i.b,n.a,r.a,{name:"order-detail",mixins:[i.b],data:function(){return{cdn:"http://www.masterjoy.top/uploads/",order:{info:[]},payWay:{1:"内置支付",2:"线上支付"},payFlag:!1}},created:function(){this._getData()},methods:{label:function(t){return{"-1":"取消订单",0:"待付款",1:"待发货",2:"待收货",3:"已完成"}[t]},handelPay:function(){var t=this;this.payFlag=!1,0!=this.checklist.length&&(2!=this.checklist[0]&&3!=this.checklist[0]?Object(e.a)({url:"/shop/order/payOrder",method:"post",data:{id:this.order.id,pay_way:this.checklist[0]}}).then(function(s){t.order.status=1}).catch(function(t){console.log(t)}):this.$vux.toast.text("线上支付正在开发中"))},handelCancel:function(t){var s=this;this.$vux.confirm.show({title:"警告",content:"确认取消订单",onConfirm:function(){Object(e.a)({url:"/shop/order/cancelOrder",method:"post",data:{id:t}}).then(function(t){s.$router.back()}).catch(function(t){console.log(t)})}})},handelGetOrder:function(t,s){var a=this;this.$vux.confirm.show({title:"确认收货",content:"是否确认收到货物",onConfirm:function(){Object(e.a)({url:"/shop/order/getOrder",method:"post",data:{id:t}}).then(function(t){var e=a.total[s];e.status=3,a.$set(a.total,s,e)}).catch(function(t){console.log(t)})}})},_getData:function(){var t=this;Object(e.a)({url:"/shop/order/getOrderDetail",params:{id:this.$route.query.id}}).then(function(s){t.order=s.data}).catch(function(s){setTimeout(function(){t.$router.back()},1e3)})}},components:{XDialog:n.a,Checklist:r.a}}),d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"order-detail"}},[a("div",{staticClass:"order-status"},[a("div",{staticClass:"status"},[t._v(t._s(t.label(t.order.status)))]),t._v(" "),a("div",{staticClass:"btn-container"},[0==t.order.status?a("div",{staticClass:"btn",on:{click:function(s){t.handelCancel(t.order.id)}}},[t._v("删除订单")]):t._e(),t._v(" "),0==t.order.status?a("div",{staticClass:"btn",on:{click:function(s){t.payFlag=!0}}},[t._v("立即付款")]):t._e(),t._v(" "),1==t.order.status?a("div",{staticClass:"text"},[t._v("等待商家发货")]):t._e(),t._v(" "),2==t.order.status?a("div",{staticClass:"btn",on:{click:function(s){t.handelGetOrder(t.order.id)}}},[t._v("确认收货")]):t._e(),t._v(" "),3==t.order.status?a("div",{staticClass:"text"},[t._v("订单已完成")]):t._e()])]),t._v(" "),a("div",{staticClass:"address"},[a("div",{staticClass:"name"},[a("div",[t._v("收件人: "+t._s(t.order.post_name))]),t._v(" "),a("div",[t._v(t._s(t.order.post_tel))])]),t._v(" "),a("div",{staticClass:"address-detail"},[a("div",{},[t._v(t._s(t.order.post_address))])])]),t._v(" "),a("div",{staticClass:"order"},[a("div",{staticClass:"header"},[a("div",{staticClass:"no"},[t._v("订单编号: "+t._s(t.order.no))]),t._v(" "),a("div",{staticClass:"label"},[t._v(t._s(t.label(t.order.status)))])]),t._v(" "),t._l(t.order.info,function(s,e){return a("div",{key:e,staticClass:"content"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.cdn+s.img}})]),t._v(" "),a("div",{staticClass:"text"},[a("div",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),s.name_ext?a("div",{staticClass:"sku"},[t._v("属性 : "+t._s(s.name_ext))]):a("div",{staticClass:"sku"},[t._v(" ")])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"price"},[t._v(t._s(s.price))]),t._v(" "),a("div",{staticClass:"num"},[t._v("x "+t._s(s.num))])])])}),t._v(" "),a("div",{staticClass:"footer"},[t._v("\n            共 "+t._s(t.order.info.length)+" 件商品      合计: ¥"+t._s(t.order.amount)+"\n        ")]),t._v(" "),a("div",{staticClass:"action"})],2),t._v(" "),a("div",{staticClass:"other-info"},[t.order.status>=1?a("div",{staticClass:"flex-between"},[a("span",[t._v("支付方式: ")]),t._v(" "),a("span",[t._v(t._s(t.payWay[t.order.pay_way]))])]):t._e(),t._v(" "),a("div",{staticClass:"flex-between"},[a("span",[t._v("下单时间: ")]),t._v(" "),a("span",[t._v(t._s(t.order.add_date))])]),t._v(" "),t.order.status>=1?a("div",{staticClass:"flex-between"},[a("span",[t._v("支付时间: ")]),t._v(" "),a("span",[t._v(t._s(t.order.pay_date))])]):t._e(),t._v(" "),t.order.status>=2?a("div",{staticClass:"flex-between"},[a("span",[t._v("发货时间: ")]),t._v(" "),a("span",[t._v(t._s(t.order.send_date))])]):t._e(),t._v(" "),t.order.status>=3?a("div",{staticClass:"flex-between"},[a("span",[t._v("收货时间: ")]),t._v(" "),a("span",[t._v(t._s(t.order.get_date))])]):t._e()]),t._v(" "),t.order.status>=2?a("div",{staticClass:"express"},[a("div",{staticClass:"flex-between"},[a("span",[t._v("快递公司: ")]),t._v(" "),a("span",[t._v(t._s(t.order.express))])]),t._v(" "),a("div",{staticClass:"flex-between"},[t._m(0),t._v(" "),a("span",{staticClass:"express-no"},[t._v(t._s(t.order.express_no))])])]):t._e(),t._v(" "),a("x-dialog",{attrs:{"hide-on-blur":""},model:{value:t.payFlag,callback:function(s){t.payFlag=s},expression:"payFlag"}},[a("div",{staticClass:"pay"},[a("checklist",{attrs:{"label-position":"right",required:"",options:t.options,max:1},model:{value:t.checklist,callback:function(s){t.checklist=s},expression:"checklist"}}),t._v(" "),a("div",{staticClass:"btn",on:{click:function(s){t.handelPay()}}},[t._v("确定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",[this._v("快递单号:\n                "),s("span",{staticStyle:{"font-size":"12px"}},[this._v("(点击查看物流)")])])}]};var c=a("VU/8")(o,d,!1,function(t){a("Oq56")},null,null);s.default=c.exports},Oq56:function(t,s){}});