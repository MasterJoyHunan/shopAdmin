webpackJsonp([4],{BO1k:function(t,e,i){t.exports={default:i("fxRn"),__esModule:!0}},EmH9:function(t,e,i){"use strict";var s=i("oWtu"),n=(s.a,Boolean,String,{name:"check-icon",components:{Icon:s.a},methods:{updateValue:function(){this.$emit("update:value",!this.value)}},props:{value:{type:Boolean,default:!1},type:{type:String,default:"default"}}}),o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-check-icon",on:{click:t.updateValue}},[i("icon",{directives:[{name:"show",rawName:"v-show",value:"default"===t.type&&t.value,expression:"type === 'default' && value"}],attrs:{type:"success"}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:"plain"===t.type&&t.value,expression:"type === 'plain' && value"}],attrs:{type:"success_circle"}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.value,expression:"!value"}],attrs:{type:"circle"}}),t._v(" "),i("span",[t._t("default")],2)],1)},staticRenderFns:[]};var a=i("VU/8")(n,o,!1,function(t){i("zga3")},null,null);e.a=a.exports},fxRn:function(t,e,i){i("+tPU"),i("zQR9"),t.exports=i("g8Ux")},g8Ux:function(t,e,i){var s=i("77Pl"),n=i("3fs2");t.exports=i("FeBl").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return s(e.call(t))}},laKm:function(t,e){},nC58:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("BO1k"),n=i.n(s),o=i("Dd8w"),a=i.n(o),r=i("NYxO"),u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-swipeout"},[this._t("default")],2)},staticRenderFns:[]};var h=i("VU/8")({name:"swipeout"},u,!1,function(t){i("laKm")},null,null).exports,c=i("mvHQ"),l=i.n(c),d=(Number,Boolean,Boolean,Number,String,String,{name:"swipeout-item",props:{sensitivity:{type:Number,default:0},autoCloseOnButtonClick:{type:Boolean,default:!0},disabled:Boolean,threshold:{type:Number,default:.3},underlayColor:String,transitionMode:{type:String,default:"reveal"}},mounted:function(){var t=this;this.$nextTick(function(){t.render()})},methods:{render:function(){this.target=this.$refs.content,this.$slots["left-menu"]&&(this.hasLeftMenu=!0,this.caculateMenuWidth("left")),this.$slots["right-menu"]&&(this.hasRightMenu=!0,this.caculateMenuWidth("right"))},caculateMenuWidth:function(t){var e=0;this.$slots[t+"-menu"][0].children.filter(function(t){return t.tag}).forEach(function(t){var i=t.componentOptions?t.componentOptions.propsData:{};e+=i.width||80}),this[t+"MenuWidth"]=e},onContentClick:function(){-1===this.styles.transform.indexOf("(0px, 0, 0)")&&this._setClose(200)},onItemClick:function(){this.autoCloseOnButtonClick&&this._setClose()},start:function(t){if(!this.disabled&&!this.isOpen&&"button"!==t.target.nodeName.toLowerCase()){if("swipeout"===this.$parent.$options._componentTag){var e=this.$parent.$children.filter(function(t){return-1===t.$data.styles.transform.indexOf("(0px, 0, 0)")});if(e.length>0)return e.forEach(function(t){t.setOffset(0,!0)}),void t.preventDefault()}var i=t.touches?t.touches[0]:t;this.pageX=i.pageX,this.pageY=i.pageY}},move:function(t){if(!this.disabled)if("button"!==t.target.nodeName.toLowerCase())if(void 0!==this.pageX){var e=t.touches?t.touches[0]:t;if(this.distX=e.pageX-this.pageX,this.distY=e.pageY-this.pageY,this.direction||(this.direction=this.distX>0?"left":"right"),("right"===this.direction&&this.distX>0&&this.hasRightMenu||"left"===this.direction&&this.distX<0&&this.hasLeftMenu)&&(this.valid=!0,t.preventDefault()),void 0===this.valid&&(this.distX>0&&!1===this.hasLeftMenu?this.valid=!1:this.distX<0&&!1===this.hasRightMenu?this.valid=!1:Math.abs(this.distX)>this.sensitivity||Math.abs(this.distY)>this.sensitivity?this.valid=Math.abs(this.distX)>Math.abs(this.distY):t.preventDefault()),!0===this.valid){if(Math.abs(this.distX)<=this.menuWidth)this.setOffset(this.distX,!1);else{var i=.5*(Math.abs(this.distX)-this.menuWidth),s=(this.menuWidth+i)*(this.distX<0?-1:1);this.setOffset(s,!1)}t.preventDefault()}}else t.preventDefault();else t.preventDefault()},end:function(t){if(!this.disabled&&"button"!==t.target.nodeName.toLowerCase()){if(!0===this.valid){if(this.distX<0&&"right"===this.direction){var e=this.threshold<=1?this.rightMenuWidth*this.threshold:this.threshold;this.distX<-e?(this.setOffset(-this.rightMenuWidth,!0),this.$emit("on-open"),this.isOpen=!0):this._setClose()}else if(this.distX>0&&"left"===this.direction){var i=this.threshold<=1?this.leftMenuWidth*this.threshold:this.threshold;this.distX>i?(this.setOffset(this.leftMenuWidth,!0),this.$emit("on-open"),this.isOpen=!0):this._setClose()}}else this.pageX;this.pageX=this.pageY=this.valid=void 0,this.direction=""}},setOffset:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments[2];if(this.isAnimated=i,!this.disabled||s){if(("right"===this.direction&&t>0||"left"===this.direction&&t<0)&&(t=0),0===t&&setTimeout(function(){e.isOpen=!1},300),t<0&&Math.abs(t)===this.rightMenuWidth?this.distX=-this.rightMenuWidth:t>0&&Math.abs(t)===this.leftMenuWidth&&(this.distX=this.leftMenuWidth),i&&this.target){this.target&&this.target.classList.add("vux-swipeout-content-animated");var n=(o=this,a=this.target,function(){a.classList.remove("vux-swipeout-content-animated"),o.isAnimated=!1,a.removeEventListener("webkitTransitionEnd",n),a.removeEventListener("transitionend",n)});this.target.addEventListener("webkitTransitionEnd",n),this.target.addEventListener("transitionend",n)}var o,a;this.styles.transform="translate3d("+t+"px, 0, 0)"}},_setClose:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setOffset(0,!0),this.$emit("on-close"),e?setTimeout(function(){t.isOpen=!1},e):this.isOpen=!1,this.distX=0},open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"right";this.setOffset("right"===t?-this.rightMenuWidth:this.leftMenuWidth,!0,!0)},close:function(){this.setOffset(0,!0,!0)}},computed:{menuWidth:function(){return!this.hasLeftMenu&&this.hasRightMenu?this.rightMenuWidth:this.hasLeftMenu&&!this.hasRightMenu?this.leftMenuWidth:this.hasLeftMenu&&this.hasRightMenu?this.distX<0?this.rightMenuWidth:this.leftMenuWidth:void 0},buttonBoxStyle:function(){return{backgroundColor:this.underlayColor}},leftButtonBoxStyle:function(){var t=JSON.parse(l()(this.buttonBoxStyle));if("follow"===this.transitionMode){var e=-1===this.styles.transform.indexOf("(0px, 0, 0)")?this.leftMenuWidth-this.distX:this.leftMenuWidth;t.transform="translate3d(-"+e+"px, 0, 0)"}return t},rightButtonBoxStyle:function(){var t=JSON.parse(l()(this.buttonBoxStyle));if("follow"===this.transitionMode){var e=-1===this.styles.transform.indexOf("(0px, 0, 0)")?this.rightMenuWidth-Math.abs(this.distX):this.rightMenuWidth;e<0&&(e=0),this.isAnimated&&(t.transition="transform 0.2s"),t.transform="translate3d("+e+"px, 0, 0)"}return t}},data:function(){return{pageX:void 0,pageY:void 0,distX:0,distY:0,hasLeftMenu:!1,hasRightMenu:!1,animated:!1,isAnimated:!1,isOpen:!1,styles:{transform:"translate3d(0px, 0, 0)"},direction:"",leftMenuWidth:160,rightMenuWidth:160}},watch:{disabled:function(t,e){!0!==t||e||this.setOffset(0,!0,!0)}}}),f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-swipeout-item",on:{touchstart:t.start,mousedown:t.start,touchmove:t.move,mousemove:t.move,touchend:t.end,mouseup:t.end,touchcancel:t.end}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.distX>=0,expression:"distX >= 0"}],staticClass:"vux-swipeout-button-box vux-swipeout-button-box-left",style:t.leftButtonBoxStyle},[t._t("left-menu")],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.distX<=0,expression:"distX <= 0"}],staticClass:"vux-swipeout-button-box",style:t.rightButtonBoxStyle},[t._t("right-menu")],2),t._v(" "),i("div",{ref:"content",staticClass:"vux-swipeout-content",style:t.styles,on:{mousedown:t.onContentClick,touchstart:t.onContentClick}},[t._t("content")],2)])},staticRenderFns:[]},p=i("VU/8")(d,f,!1,null,null,null).exports,v=(String,String,String,Number,{name:"swipeout-button",props:{text:String,backgroundColor:String,type:String,width:{type:Number,default:80}},methods:{onButtonClick:function(){"swipeout-item"===this.$parent.$options._componentTag&&this.$parent.onItemClick(this.text)}}}),m={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"vux-swipeout-button",class:{"vux-swipeout-button-primary":"primary"===t.type,"vux-swipeout-button-warn":"warn"===t.type,"vux-swipeout-button-default":"default"===t.type},style:{width:t.width+"px",backgroundColor:t.backgroundColor},attrs:{type:"button"},on:{click:t.onButtonClick}},[t._t("default",[t._v(t._s(t.text))])],2)},staticRenderFns:[]},g=i("VU/8")(v,m,!1,null,null,null).exports,C=i("EmH9"),_=(String,Number,Number,Number,String,String,{name:"number",props:{size:{type:String,required:!0},width:{default:25},min:{type:Number,default:0},max:{type:Number,default:9999999},value:{type:Number,default:1},color:{type:String,default:"#09BB07"},disableColr:{type:String,default:"#ccc"}},methods:{doIng:function(t){t?this.$emit("add"):this.$emit("min")}},computed:{nowMinColor:function(){return this.value<=this.min?this.disableColr:this.color},nowAddColor:function(){return this.value>=this.max?this.disableColr:this.color}}}),x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mj-number"},[i("div",{staticClass:"border",style:{width:t.size+"px",height:t.size+"px",border:"1px solid "+t.nowMinColor},on:{click:function(e){t.doIng(0)}}},[i("svg-icon",{attrs:{"icon-class":"min",color:t.nowMinColor,size:t.size}})],1),t._v(" "),i("input",{staticClass:"input-text",style:{width:t.width+"px",fontSize:t.size+"px"},attrs:{type:"number",min:t.min,max:t.max,disabled:"",readonly:""},domProps:{value:t.value}}),t._v(" "),i("div",{staticClass:"border",style:{width:t.size+"px",height:t.size+"px",border:"1px solid "+t.nowAddColor},on:{click:function(e){t.doIng(1)}}},[i("svg-icon",{attrs:{"icon-class":"add",color:t.nowAddColor,size:t.size}})],1)])},staticRenderFns:[]};var b=i("VU/8")(_,x,!1,function(t){i("uma/")},null,null).exports,k=i("DA34"),w=i("HulU"),y=(a()({},Object(r.c)(["cart"])),a()({getImg:function(t){return null!=t.pro_sku?t.pro_sku.img:t.pro.img},getStock:function(t){return null!=t.pro_sku?t.pro_sku.stock:t.pro.stock},getPrice:function(t){return null!=t.pro_sku?t.pro_sku.price:t.pro.price},getSku:function(t){return null!=t.pro_sku?t.pro_sku.name:""},gotoPro:function(t){this.$router.push({path:"/product",query:{id:t}})},checked:function(t,e){this.setCartChecked({index:e,flag:!t.check})},add:function(t,e,i){0==i&&t.num<=1||1==i&&t.num>=this.getStock(t)||this.cartChange({cart_id:t.id,index:e,flag:i})},setAll:function(){var t=this;this.cart.map(function(e,i){t.setCartChecked({index:i,flag:!t.chooseAll})})},handelDelete:function(t,e){var i=this;this.$vux.confirm.show({title:"警告",content:"确认删除",onConfirm:function(){Object(w.a)({url:"/shop/cart/deleteCart",method:"post",data:{cart_id:t.id}}).then(function(t){i.deleteCart(e)}).catch(function(t){console.log(t)})}})},pay:function(){var t=this,e=[];this.cart.length>0&&this.cart.map(function(t){t.check&&e.push(t.id)}),0!=e.length&&Object(w.a)({url:"/shop/order/cartSubmit",method:"post",data:{id:e}}).then(function(e){t.$router.push("/cartOrder")}).catch(function(e){-1==e.status&&setTimeout(function(){t.$router.push("/addAddress")},1e3)})}},Object(r.b)(["initCart","cartChange","initAddress"]),Object(r.d)({setCartChecked:"SET_CART_CHECKED",deleteCart:"DELETE_CART"})),C.a,k.a,{name:"cart",data:function(){return{chooseAll:!1,totalPrice:0}},created:function(){this.initAddress(),0==this.cart.length&&this.initCart()},activated:function(){0==this.cart.length&&(this.chooseAll=!1,this.totalPrice=0)},computed:a()({},Object(r.c)(["cart"])),methods:a()({getImg:function(t){return null!=t.pro_sku?t.pro_sku.img:t.pro.img},getStock:function(t){return null!=t.pro_sku?t.pro_sku.stock:t.pro.stock},getPrice:function(t){return null!=t.pro_sku?t.pro_sku.price:t.pro.price},getSku:function(t){return null!=t.pro_sku?t.pro_sku.name:""},gotoPro:function(t){this.$router.push({path:"/product",query:{id:t}})},checked:function(t,e){this.setCartChecked({index:e,flag:!t.check})},add:function(t,e,i){0==i&&t.num<=1||1==i&&t.num>=this.getStock(t)||this.cartChange({cart_id:t.id,index:e,flag:i})},setAll:function(){var t=this;this.cart.map(function(e,i){t.setCartChecked({index:i,flag:!t.chooseAll})})},handelDelete:function(t,e){var i=this;this.$vux.confirm.show({title:"警告",content:"确认删除",onConfirm:function(){Object(w.a)({url:"/shop/cart/deleteCart",method:"post",data:{cart_id:t.id}}).then(function(t){i.deleteCart(e)}).catch(function(t){console.log(t)})}})},pay:function(){var t=this,e=[];this.cart.length>0&&this.cart.map(function(t){t.check&&e.push(t.id)}),0!=e.length&&Object(w.a)({url:"/shop/order/cartSubmit",method:"post",data:{id:e}}).then(function(e){t.$router.push("/cartOrder")}).catch(function(e){-1==e.status&&setTimeout(function(){t.$router.push("/addAddress")},1e3)})}},Object(r.b)(["initCart","cartChange","initAddress"]),Object(r.d)({setCartChecked:"SET_CART_CHECKED",deleteCart:"DELETE_CART"})),watch:{cart:{handler:function(t,e){var i=0,s=!0;if(0!=t.length){var o=!0,a=!1,r=void 0;try{for(var u,h=n()(t);!(o=(u=h.next()).done);o=!0){var c=u.value;!1!==c.check?i+=this.getPrice(c)*c.num:(this.chooseAll=!1,s=!1)}}catch(t){a=!0,r=t}finally{try{!o&&h.return&&h.return()}finally{if(a)throw r}}this.totalPrice=i.toFixed(2),this.chooseAll=s}},deep:!0}},components:{Swipeout:h,SwipeoutItem:p,SwipeoutButton:g,CheckIcon:C.a,number:b,plant:k.a}}),M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"cart"}},[i("swipeout",t._l(t.cart,function(e,s){return i("swipeout-item",{key:s,attrs:{"transition-mode":"follow"}},[i("div",{staticClass:"menu-container",attrs:{slot:"right-menu"},on:{click:function(i){t.handelDelete(e,s)}},slot:"right-menu"},[i("swipeout-button",{staticClass:"delete-menu"},[i("svg-icon",{attrs:{"icon-class":"delete",color:"#ccc",size:"26"}})],1)],1),t._v(" "),i("div",{staticClass:"pro-container",attrs:{slot:"content"},slot:"content"},[i("check-icon",{attrs:{value:e.check},nativeOn:{click:function(i){t.checked(e,s)}}}),t._v(" "),i("div",{staticClass:"item"},[i("plant",{attrs:{slot:"content",item:e,img:t.getImg(e),"back-color":"#fff"},on:{clickImg:function(i){t.gotoPro(e.pro_id)}},slot:"content"},[i("div",{staticClass:"text-content",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"content-box"},[i("div",{staticClass:"title",on:{click:function(i){t.gotoPro(e.pro_id)}}},[t._v(t._s(e.pro.title))]),t._v(" "),t.getSku(e)?i("div",{staticClass:"sku"},[t._v("规格: "+t._s(t.getSku(e)))]):i("div",[t._v("  ")]),t._v(" "),i("div",{staticClass:"price"},[t._v("价格: ¥"+t._s(t.getPrice(e)))]),t._v(" "),i("number",{attrs:{size:"15",min:1,max:t.getStock(e),value:e.num},on:{add:function(i){t.add(e,s,1)},min:function(i){t.add(e,s,0)}}})],1)])])],1)],1)])})),t._v(" "),i("div",{staticClass:"settlement"},[i("div",{staticClass:"choose-all"},[i("check-icon",{attrs:{value:t.chooseAll},nativeOn:{click:function(e){t.setAll()}}}),t._v("全选")],1),t._v(" "),i("div",{staticClass:"total"},[t._v("合计:\n            "),i("span",[t._v("¥ "+t._s(t.totalPrice))])]),t._v(" "),i("div",{staticClass:"button-container",on:{click:function(e){t.pay()}}},[t._v("结算")])])],1)},staticRenderFns:[]};var O=i("VU/8")(y,M,!1,function(t){i("x1wt")},null,null);e.default=O.exports},"uma/":function(t,e){},x1wt:function(t,e){},zga3:function(t,e){}});