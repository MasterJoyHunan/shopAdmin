webpackJsonp([8],{FWz8:function(e,s,t){"use strict";s.b=function(e){return Object(r.a)({url:"order/index",method:"get",params:e})},s.a=function(e){return Object(r.a)({url:"order/getOrderDetail",method:"get",params:e})},s.d=function(e){return Object(r.a)({url:"order/sendGoods",method:"post",data:e})},s.c=function(e){return Object(r.a)({url:"order/selfPickedUp",method:"post",data:e})};var r=t("vLgD")},"aZ+E":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("FWz8"),a={name:"order-list",data:function(){return{cdn:"/uploads/",order:{},expressList:[],expressInfo:{id:"",express:"",express_no:""},formRule:{express:[{required:!0,message:"请填写快递公司",trigger:"blur"}],express_no:[{required:!0,min:5,message:"请填写正确快递单号",trigger:"blur"}]},showDialog:!1}},created:function(){this._getData()},methods:{sendGoods:function(){this.showDialog=!0,this.expressInfo.express="",this.expressInfo.express_no=""},pickedUp:function(){var e=this;this.$confirm("确认客户过来自提?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)({id:e.order.id}).then(function(s){e.$message({message:"删除成功",type:"success"}),e.order.status=3,e.order.express="自提",e.order.express_no="自提"})})},onSubmit:function(){var e=this;this.$refs.expressForm.validate(function(s){if(!s)return!1;e.expressInfo.id=e.$route.query.id,Object(r.d)(e.expressInfo).then(function(s){e.$message({message:s.msg,type:"success"}),e.showDialog=!1,e.order.status=2,e.order.express=e.expressInfo.express,e.order.express_no=e.expressInfo.express_no})})},_getData:function(){var e=this;Object(r.a)({id:this.$route.query.id}).then(function(s){e.order=s.data.order,e.expressList=s.data.express}).catch(function(s){e.$router.back()})},getImg:function(e){return(this.cdn+e.img).replace(/\\/g,"/")}}},n={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"app-container",attrs:{id:"order-detail"}},[t("el-row",[t("el-col",{staticClass:"order-left",attrs:{span:18}},[t("div",{staticClass:"box-container"},[t("el-steps",{attrs:{active:e.order.status+2,"align-center":""}},[t("el-step",{attrs:{title:"取消订单"}}),e._v(" "),t("el-step",{attrs:{title:"等待支付"}}),e._v(" "),t("el-step",{attrs:{title:"等待发货"}}),e._v(" "),t("el-step",{attrs:{title:"等待收货"}}),e._v(" "),t("el-step",{attrs:{title:"完成订单"}})],1),e._v(" "),t("div",{staticClass:"product"},[t("p",{staticStyle:{"border-bottom":"1px dashed #ccc",padding:"10px",color:"#ccc"}},[e._v("商品列表")]),e._v(" "),t("div",{staticClass:"product-container"},e._l(e.order.info,function(s,r){return t("div",{key:r,staticClass:"product-item"},[t("div",{staticClass:"img",style:{backgroundImage:"url("+e.getImg(s)+")"}}),e._v(" "),t("div",{staticClass:"text-container text-title"},[t("div",{staticClass:"title"},[e._v(e._s(s.name))]),e._v(" "),s.name_ext?t("div",{staticClass:"sku"},[e._v("\n                                    商品属性 : "+e._s(s.name_ext))]):t("div",{staticClass:"sku"},[e._v(" ")])]),e._v(" "),t("div",{staticClass:"text-container text-price"},[t("div",{staticClass:"price"},[e._v("\n                                    价格 : ¥"+e._s(s.price))]),e._v(" "),t("div",{staticClass:"num"},[e._v("\n                                    购买数量 : "+e._s(s.num))])])])}))])],1)]),e._v(" "),t("el-col",{staticClass:"order-right",attrs:{span:6}},[t("ul",{staticClass:"price"},[t("li",[t("span",[e._v("商品总价")]),e._v(" "),t("span",[e._v("¥ "+e._s(e.order.money))])]),e._v(" "),t("li",[t("span",[e._v("邮费")]),e._v(" "),t("span",[e._v("¥ "+e._s(e.order.postage))])]),e._v(" "),t("li",[t("span",[e._v("优惠")]),e._v(" "),t("span",[e._v("¥ "+e._s(e.order.reduce))])]),e._v(" "),t("li",[t("span",[e._v("订单总价")]),e._v(" "),t("span",[e._v("¥ "+e._s(e.order.amount))])]),e._v(" "),t("li",{staticClass:"pay"},[t("span",[e._v("已支付")]),e._v(" "),t("span",[e._v("¥ "+e._s(e.order.payment))])])]),e._v(" "),t("span",{staticClass:"post"},[e._v("#收货信息")]),e._v(" "),t("ul",{staticClass:"address"},[t("li",[t("span",[e._v("收货人")]),e._v(" "),t("span",[e._v(e._s(e.order.post_name))])]),e._v(" "),t("li",[t("span",[e._v("收货电话")]),e._v(" "),t("span",[e._v(e._s(e.order.post_tel))])]),e._v(" "),t("li",[t("span",[e._v("收货地址")]),e._v(" "),t("span",[e._v(e._s(e.order.post_address))])])]),e._v(" "),t("span",{staticClass:"post"},[e._v("#快递信息")]),e._v(" "),e.order.status>1?t("ul",{staticClass:"address"},[t("li",[t("span",[e._v("快递公司")]),e._v(" "),t("span",[e._v(e._s(e.order.express))])]),e._v(" "),t("li",[t("span",[e._v("快递单号")]),e._v(" "),t("span",[e._v(e._s(e.order.express_no))])])]):1==e.order.status?t("div",{staticClass:"express"},[t("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(s){e.sendGoods()}}},[e._v("点击发货")]),e._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(s){e.pickedUp()}}},[e._v("自提")])],1):e._e()])],1),e._v(" "),t("el-dialog",{attrs:{visible:e.showDialog,title:"填写发货信息",width:"30%"},on:{"update:visible":function(s){e.showDialog=s}}},[t("el-form",{ref:"expressForm",attrs:{"status-icon":"","label-width":"120px",model:e.expressInfo,rules:e.formRule},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"快递公司",prop:"express"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.expressInfo.express,callback:function(s){e.$set(e.expressInfo,"express",s)},expression:"expressInfo.express"}},e._l(e.expressList,function(e,s){return t("el-option",{key:s,attrs:{value:e,label:e}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"快递单号",prop:"express_no"}},[t("el-input",{model:{value:e.expressInfo.express_no,callback:function(s){e.$set(e.expressInfo,"express_no",s)},expression:"expressInfo.express_no"}})],1),e._v(" "),t("el-form-item",[t("div",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)])],1)],1)],1)},staticRenderFns:[]};var i=t("VU/8")(a,n,!1,function(e){t("q/jq")},"data-v-24d371d6",null);s.default=i.exports},"q/jq":function(e,s){}});