webpackJsonp([16],{MuZL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("Dd8w"),n=a.n(l),r=a("UgCr"),i=a("NYxO"),s={name:"goods",mixins:[a("vsZy").a],data:function(){return{cate:[],params:{title:"",cate_id:""}}},methods:n()({getRowClass:function(t){return 0==t.row.sku.length?"hide-expand":""},handleEdit:function(t){this.$router.push({path:"/product/editgoods",query:{id:t.id}})},handleDel:function(t,e){var a=this;this.$confirm("删除商品将不可恢复","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),Object(r.b)({id:e.id,type:1}).then(function(e){a.list.splice(t,1)})})},addGoods:function(){this.$router.push("/product/addgoods")},_getData:function(){var t=this;Object(r.e)(this.params).then(function(e){t.list=e.data.pro.data,t.cate=e.data.cate,t.total=e.data.pro.total,t.pageSize=e.data.pro.per_page,t.page=e.data.pro.current_page,t.table_loading=!1}).catch(function(e){t.table_loading=!0})}},Object(i.d)({setPro:"SET_PRODUCT"}))},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",attrs:{id:"product-index"}},[a("p",{staticClass:"page-title"},[t._v("商品列表")]),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",plain:""},on:{click:function(e){t.addGoods()}}},[t._v("添加商品")]),t._v(" "),a("div",{staticStyle:{float:"right",display:"flex"}},[a("el-select",{attrs:{placeholder:"分类"},model:{value:t.params.cate_id,callback:function(e){t.$set(t.params,"cate_id",e)},expression:"params.cate_id"}},t._l(t.cate,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px",margin:"0 3px"},attrs:{placeholder:"商品名"},model:{value:t.params.title,callback:function(e){t.$set(t.params,"title",e)},expression:"params.title"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table_loading,expression:"table_loading"}],ref:"tableRef",attrs:{"element-loading-text":"加载中...",border:"","highlight-current-row":"","row-class-name":t.getRowClass,"row-key":"id",data:t.list}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.sku.length?[a("el-table",{staticClass:"sku-table",attrs:{data:e.row.sku,size:"mini","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"属性名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"img",align:"center",label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"img-container"},[a("img",{staticClass:"img-container",attrs:{src:t.cdn+e.row.img}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"market_price",align:"center",label:"市场价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",align:"center",label:"售价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",align:"center",label:"库存"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sales_volume",align:"center",label:"售出"}})],1)]:void 0}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"60px"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品名",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px",dislay:"block"},attrs:{src:t.cdn+e.row.img}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"所属分类",prop:"cate_id"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.cate[e.row.cate_id]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"市场价",prop:"market_price"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"售价",prop:"price"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"库存",width:"80px",prop:"stock"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"销量",width:"80px",prop:"sales_volume"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("上架")]):t._e(),t._v(" "),0==e.row.status?a("el-tag",{attrs:{type:"danger"}},[t._v("下架")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"170px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"page-container"},[a("el-pagination",{attrs:{background:"","current-page":t.params.page,"page-sizes":t.page_sizes,"page-size":t.params.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"update:currentPage":function(e){t.$set(t.params,"page",e)},"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,o,!1,function(t){a("ZK54")},null,null);e.default=c.exports},ZK54:function(t,e){}});